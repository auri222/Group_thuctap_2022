{% extends "buyer_layout.html" %}

{% block title %}
Food Delivery
{% endblock %}

{% block style %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.14/dist/sweetalert2.min.css">
<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
<link rel="stylesheet" href="{{ url_for('static', path='frontend/css/buyer_index.css') }}">

{% endblock %}

{% block content %}
<div class="row">
  <div class="col-1 col-md-2 col-lg-2"></div>
  <div class="col-9 col-md-8 col-lg-8">

    <div class="row">
      <div class="col-md-10">
        <h4>Thông tin tài khoản</h4>
      </div>
      <div class="col-md-2">
        <a href="#" type="button" class="btn-edit-acc" data-bs-toggle="modal" data-bs-target="#accInfoModal"><i
            class="bi bi-pencil-square"></i></a>
      </div>
    </div>
    <table class="table table-borderless">
      {% if account_info %}

      {% for account in account_info %}

      <tbody>

        <tr>
          <th scope="row">Tên tài khoản:</th>
          <td>
            {{ account.account_username }}
          </td>
        </tr>
        <tr>
          <th scope="row">Ngày tạo tài khoản:</th>
          <td>
            {% set date_created = account.account_date_created %}
            {{ date_created.strftime("%d/%m/%Y %H:%M:%S") }}
          </td>
        </tr>

      </tbody>
      {% endfor %}
      {% endif %}
    </table>
    <hr>

    <div class="row">
      <div class="col-md-10">
        <h4>Thông tin cá nhân</h4>
      </div>
      <div class="col-md-2">
        <a href="#" type="button" class="btn-edit-info " data-bs-toggle="modal" data-bs-target="#infoModal"><i
            class="bi bi-pencil-square"></i></a>
      </div>
    </div>
    <table class="table table-borderless">
      {% if buyer_info %}
      {% for info in buyer_info %}

      <tbody>

        <tr>
          <th scope="row">Họ tên: </th>
          <td>{{ info.buyer_name }}</td>
        </tr>

        <tr>
          <th scope="row">Ngày sinh: </th>
          <td>
            {% set birthday = info.buyer_birthday %}
            {{ birthday.strftime("%d/%m/%Y") }}
          </td>
        </tr>
        <tr>
          <th scope="row">Địa chỉ: </th>
          <td>{{ info.buyer_address }}</td>
        </tr>
        <tr>
          <th scope="row">Số điện thoại: </th>
          <td>{{ info.buyer_phone }}</td>
        </tr>
        <tr>
          <th scope="row">Email: </th>
          <td>{{ info.buyer_email }}</td>
        </tr>
        <tr>
          <th scope="row">Địa chỉ giao hàng: </th>
          <td>{{ info.buyer_shipping_address }}</td>
        </tr>

      </tbody>
      {% endfor %}
      {% endif %}
    </table>



  </div>
  <div class="col-1 col-md-2 col-lg-2"></div>
</div>
{% endblock %}


{% block modal %}
<!-- Modal sửa thông tin tài khoản -->
<div class="modal fade" id="accInfoModal" tabindex="-1" aria-labelledby="accInfoModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="accInfoModalLabel">Sửa tên đăng nhập</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      {% if account_info %}

      {% for account in account_info %}
      <form id="frmAcc">
        <div class="modal-body">
          <div class="form-group">
            <label for="username" class="col-form-label">Tên đăng nhập:</label>
            <input type="text" class="form-control" id="account_username" name="account_username"
              value="{{ account.account_username }}">
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary btn-save-acc" data-account-id="">Lưu thay đổi</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
        </div>
      </form>
      {% endfor %}
      {% endif %}
    </div>
  </div>
</div>

<!-- Modal sửa thông tin cá nhận -->
<div class="modal fade" id="infoModal" tabindex="-1" aria-labelledby="infoModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="infoModalLabel">Sửa thông tin cá nhân</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      {% if buyer_info %}
      {% for info in buyer_info %}
      <form id="frmInfo">
        <div class="modal-body">
          <div class="form-group">
            <label for="name" class="col-form-label">Họ tên:</label>
            <input type="text" class="form-control" id="buyer_name" name="buyer_name" value="{{ info.buyer_name }}">
            &nbsp; <span style="color: red;">*</span>
          </div>
          <div class="form-group">
            <label for="dob" class="col-form-label">Ngày sinh:</label> &nbsp;
            <input type="date" class="form-control" id="buyer_birthday" name="buyer_birthday"
              value="{{ info.buyer_birthday }}"> &nbsp; <span style="color: red;">*</span>
          </div>
          <div class="form-group">
            <label for="dob" class="col-form-label">Địa chỉ:</label> &nbsp;
            <input type="text" class="form-control" id="buyer_address" name="buyer_address"
              value="{{ info.buyer_address }}">

          </div>
          <div class="form-group">
            <label for="dob" class="col-form-label">Số điện thoại:</label> &nbsp;
            <input type="text" class="form-control" id="buyer_phone" name="buyer_phone" value="{{ info.buyer_phone }}">
            &nbsp; <span style="color: red;">*</span>
          </div>
          <div class="form-group">
            <label for="dob" class="col-form-label">Email:</label> &nbsp;
            <input type="text" class="form-control" id="buyer_email" name="buyer_email" value="{{ info.buyer_email }}">
            &nbsp; <span style="color: red;">*</span>
          </div>
          <div class="form-group">
            <label for="dob" class="col-form-label">Địa chỉ giao hàng:</label> &nbsp;
            <input type="text" class="form-control" id="buyer_shipping_address" name="buyer_shipping_address"
              value="{{ info.buyer_shipping_address }}"> &nbsp; <span style="color: red;">*</span>
          </div>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary btn-save-info" data-buyer-id="">Lưu thay đổi</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
        </div>
      </form>
      {% endfor %}
      {% endif %}
    </div>
  </div>
</div>

{% endblock %}